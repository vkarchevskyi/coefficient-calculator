<div class="container">
  <mat-form-field>
    <mat-label>Сума чисел помножених на коефіцієнти дорівнює:</mat-label>
    <input matInput type="number" [(ngModel)]="sum">
  </mat-form-field>

  <div class="button-container">
    <button mat-raised-button color="primary" (click)="addNumber()" class="add-button">
      <mat-icon>add</mat-icon> Додати число
    </button>
    <button mat-raised-button color="warn" [disabled]="numbers.length <= 0" (click)="removeLastNumber()"
      class="remove-button">
      <mat-icon>remove</mat-icon> Видалити останнє число
    </button>
  </div>

  <div class="number-form-wrapper">
    @for (number of numbers; track number.id) {
    <mat-card class="">
      <mat-card-content>
        <div class="input-row">
          <mat-form-field>
            <mat-label>Число:</mat-label>
            <input matInput type="number" [(ngModel)]="number.value">
          </mat-form-field>
          <mat-form-field>
            <mat-label>Починати пошук коефіцієнта з:</mat-label>
            <input matInput type="number" [(ngModel)]="number.startSearchFrom">
          </mat-form-field>
        </div>
        <div class="input-row">
          <mat-checkbox [(ngModel)]="number.isFloat">Може бути дробовим</mat-checkbox>
          @if (showError) {
          <p>Помилка в обраховуванні</p>
          } @else if (number.result) {
          <p>Коефіцієнт: <b>{{ number.result }}</b></p>
          }
        </div>
      </mat-card-content>
    </mat-card>
    }
  </div>

  <button mat-raised-button color="primary" (click)="startCalculation()">Порахувати</button>

  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>Системні налаштування</mat-panel-title>
    </mat-expansion-panel-header>
    <div class="input-row">
      <mat-form-field>
        <mat-label>Точність оцінки</mat-label>
        <input matInput type="number" [(ngModel)]="precision">
      </mat-form-field>
      <mat-form-field>
        <mat-label>Кількість ітерацій циклу</mat-label>
        <input matInput type="number" [(ngModel)]="maxIterations">
      </mat-form-field>
    </div>
  </mat-expansion-panel>
</div>

<router-outlet />
